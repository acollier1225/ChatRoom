{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PusherProvider = void 0;\n\nvar React = __importStar(require(\"react\"));\n\nvar PusherContext = React.createContext({});\nexports.PusherProvider = PusherContext.Provider;\n\nvar parseEventKey = function (eventKey) {\n  return eventKey.split('.');\n};\n\nvar withPusher = function (config) {\n  return function (WrappedComponent) {\n    var _a;\n\n    return _a = function (_super) {\n      __extends(WithPusher, _super);\n\n      function WithPusher(props) {\n        var _this = _super.call(this, props) || this;\n\n        var values = config.mapPropsToValues(_this.props);\n        _this.state = {\n          values: values\n        };\n        return _this;\n      }\n\n      WithPusher.prototype.componentDidMount = function () {\n        var _this = this;\n\n        var fns = config.events;\n        Object.entries(fns).forEach(function (_a) {\n          var eventKey = _a[0],\n              fn = _a[1];\n\n          var _b = parseEventKey(eventKey),\n              channelName = _b[0],\n              eventName = _b[1];\n\n          _this.context.subscribe(channelName).bind(eventName, function (event) {\n            _this.setState(function (prevState) {\n              return __assign(__assign({}, prevState), {\n                values: __assign(__assign({}, prevState.values), fn(event, _this.state.values, _this.props))\n              });\n            });\n          });\n        });\n      };\n\n      WithPusher.prototype.componentWillUnmount = function () {\n        var _this = this;\n\n        var fns = config.events;\n        Object.entries(fns).forEach(function (_a) {\n          var eventKey = _a[0];\n\n          var _b = parseEventKey(eventKey),\n              channelName = _b[0],\n              eventName = _b[1];\n\n          _this.context.channel(channelName).unbind(eventName);\n        });\n      };\n\n      WithPusher.prototype.render = function () {\n        return React.createElement(WrappedComponent, __assign({}, this.props, this.state.values));\n      };\n\n      return WithPusher;\n    }(React.Component), _a.contextType = PusherContext, _a;\n  };\n};\n\nexports.default = withPusher;","map":{"version":3,"sources":["../lib/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PusherProvider = void 0;\nvar React = __importStar(require(\"react\"));\nvar PusherContext = React.createContext({});\nexports.PusherProvider = PusherContext.Provider;\nvar parseEventKey = function (eventKey) { return eventKey.split('.'); };\nvar withPusher = function (config) { return function (WrappedComponent) {\n    var _a;\n    return _a = (function (_super) {\n            __extends(WithPusher, _super);\n            function WithPusher(props) {\n                var _this = _super.call(this, props) || this;\n                var values = config.mapPropsToValues(_this.props);\n                _this.state = {\n                    values: values,\n                };\n                return _this;\n            }\n            WithPusher.prototype.componentDidMount = function () {\n                var _this = this;\n                var fns = config.events;\n                Object.entries(fns).forEach(function (_a) {\n                    var eventKey = _a[0], fn = _a[1];\n                    var _b = parseEventKey(eventKey), channelName = _b[0], eventName = _b[1];\n                    _this.context\n                        .subscribe(channelName)\n                        .bind(eventName, function (event) {\n                        _this.setState(function (prevState) { return (__assign(__assign({}, prevState), { values: __assign(__assign({}, prevState.values), fn(event, _this.state.values, _this.props)) })); });\n                    });\n                });\n            };\n            WithPusher.prototype.componentWillUnmount = function () {\n                var _this = this;\n                var fns = config.events;\n                Object.entries(fns).forEach(function (_a) {\n                    var eventKey = _a[0];\n                    var _b = parseEventKey(eventKey), channelName = _b[0], eventName = _b[1];\n                    _this.context\n                        .channel(channelName)\n                        .unbind(eventName);\n                });\n            };\n            WithPusher.prototype.render = function () {\n                return React.createElement(WrappedComponent, __assign({}, this.props, this.state.values));\n            };\n            return WithPusher;\n        }(React.Component)),\n        _a.contextType = PusherContext,\n        _a;\n}; };\nexports.default = withPusher;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}